type: pipeline_definition
product: Liberty
name: Open Liberty Personal Build
description: A build run against Open Liberty Pull Requests
triggers:
- type: schedule
  triggerName: "Open Liberty Personal product only change"
  triggerRank: 50
  triggerMonitored: false
  triggerThreshold: 100
  every:
    hours: 168
  propertyDefinitions:
  - name: git.laos.clone.repository.username
    defaultValue: "fritze2"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: git.laos.clone.checkout.branch
    defaultValue: "test-change-com.ibm.ws.jca"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: githubPRApi
    defaultValue: "https://api.github.com/repos/OpenLiberty/open-liberty/pulls/23250"
    steps:
    - stepName: pr-changes
    - stepName: dependencymapping
  - name: githubPRNumber
    defaultValue: "23250"
    steps:
    - stepName: pr-changes
    
- type: schedule
  triggerName: "Open Liberty Personal unittest only change"
  triggerRank: 50
  triggerMonitored: false
  triggerThreshold: 100
  every:
    hours: 168
  propertyDefinitions:
  - name: git.laos.clone.repository.username
    defaultValue: "fritze2"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: git.laos.clone.checkout.branch
    defaultValue: "test-change-com.ibm.ws.jmx-unittest"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: githubPRApi
    defaultValue: "https://api.github.com/repos/OpenLiberty/open-liberty/pulls/23738"
    steps:
    - stepName: pr-changes
    - stepName: dependencymapping
  - name: githubPRNumber
    defaultValue: "23738"
    steps:
    - stepName: pr-changes
    
- type: schedule
  triggerName: "Open Liberty Personal FAT only change"
  triggerRank: 50
  triggerMonitored: false
  triggerThreshold: 100
  every:
    hours: 168
  propertyDefinitions:
  - name: git.laos.clone.repository.username
    defaultValue: "fritze2"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: git.laos.clone.checkout.branch
    defaultValue: "test-change-com.ibm.ws.jca_fat"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: githubPRApi
    defaultValue: "https://api.github.com/repos/OpenLiberty/open-liberty/pulls/23249"
    steps:
    - stepName: pr-changes
    - stepName: dependencymapping
  - name: githubPRNumber
    defaultValue: "23249"
    steps:
    - stepName: pr-changes
    
- type: schedule
  triggerName: "Open Liberty Personal BVT only change"
  triggerRank: 50
  triggerMonitored: false
  triggerThreshold: 100
  every:
    hours: 168
  propertyDefinitions:
  - name: git.laos.clone.repository.username
    defaultValue: "fritze2"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: git.laos.clone.checkout.branch
    defaultValue: "test-change-com.ibm.ws.jca_fat_bvt"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: githubPRApi
    defaultValue: "https://api.github.com/repos/OpenLiberty/open-liberty/pulls/23248"
    steps:
    - stepName: pr-changes
    - stepName: dependencymapping
  - name: githubPRNumber
    defaultValue: "23248"
    steps:
    - stepName: pr-changes
    
- type: schedule
  triggerName: "Open Liberty Personal infrastructure only change"
  triggerRank: 50
  triggerMonitored: false
  triggerThreshold: 100
  every:
    hours: 168
  propertyDefinitions:
  - name: git.laos.clone.repository.username
    defaultValue: "fritze2"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: git.laos.clone.checkout.branch
    defaultValue: "test-change-infra"
    steps:
    - stepName: compile
    - stepName: unittest
  - name: githubPRApi
    defaultValue: "https://api.github.com/repos/OpenLiberty/open-liberty/pulls/23739"
    steps:
    - stepName: pr-changes
    - stepName: dependencymapping
  - name: githubPRNumber
    defaultValue: "23739"
    steps:
    - stepName: pr-changes
    
steps:
- stepGroup: personalbuild
  includeSteps:
    - filePattern: "personalbuild.yml"
