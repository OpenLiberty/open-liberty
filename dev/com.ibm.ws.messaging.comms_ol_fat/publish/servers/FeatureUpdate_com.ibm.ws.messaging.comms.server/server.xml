<server description="new server">
	<include location="../fatTestPorts.xml"/>
	<logging maxFileSize="200" traceSpecification="SIBJFapChannel:SIBCommunications:SSLChannel:SSL=all:config.source=servers/FeatureUpdate_com.ibm.ws.messaging.comms.server/server.xml"/>

	<!-- Enable features -->
	<featureManager>
		<feature>timedexit-1.0</feature>
		<feature>wasJmsServer-1.0</feature>
		<feature>wasJmsSecurity-1.0</feature>
	</featureManager>

	<keyStore location="${server.output.dir}/resources/security/mykeynew.jks" password="{xor}NDombm1s" id="defaultKeyStore"/>

	<!-- Overriding the values of the properties used for wasJmsEndpoint port configuration in fatTestPorts.xml -->
	<variable name="bvt.prop.jms"      value="${bvt.prop.jms.1}" />
	<variable name="bvt.prop.jms.ssl"  value="${bvt.prop.jms.1.ssl}" />
	<!-- wasJmsPort and wasJmsSSLPort settings in wasJmsEndpoint must match those set in fatTestPorts.xml, to avoid configuration conflict warnings. -->
	<wasJmsEndpoint id="InboundJmsCommsEndpoint" host="*" wasJmsPort="${bvt.prop.jms}" wasJmsSSLPort="${bvt.prop.jms.ssl}" />

	<variable name="onError" value="FAIL"/>

	<basicRegistry id="basic" realm="SampleBasicRealm">
		<user name="user1" password="password123" />
		<user name="user2" password="password123" />
		<group name="users">
			<member name="user1"/>
			<member name="user2"/>
		</group>
	</basicRegistry>


	<!-- Messaging Security Tag -->
	<messagingEngine id="newME" >
		<queue id="QUEUE1" />
		<queue id="QUEUE2" />

		<messagingSecurity>
			<role name="CREATEAUTH">
				<queuePermission queueRef="QUEUE1">
					<action>SEND</action>
					<action>RECEIVE</action>
					<action>BROWSE</action>
				</queuePermission>
				<group name="users" />
			</role>
		</messagingSecurity>

	</messagingEngine>
</server>
