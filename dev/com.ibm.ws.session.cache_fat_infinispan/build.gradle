/*******************************************************************************
 * Copyright (c) 2019 IBM Corporation and others.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *     IBM Corporation - initial API and implementation
 *******************************************************************************/

configurations {
  caffeine
  gson
  infinispanCommons
  infinispanCore
  infinispanJCache
  infinispanJCacheCommons
  jbossLogging
  jGroups
  protoparser
  protostream
  reactiveStreams
  rxjava
}

// Define G:A:V coordinates of each dependency
dependencies {
  caffeine 'com.github.ben-manes.caffeine:caffeine:2.8.0'
  gson 'com.google.code.gson:gson:2.8.2'
  infinispanCommons 'org.infinispan:infinispan-commons:10.0.0.CR1'
  infinispanCore 'org.infinispan:infinispan-core:10.0.0.CR1'
  infinispanJCache 'org.infinispan:infinispan-jcache:10.0.0.CR1'
  infinispanJCacheCommons 'org.infinispan:infinispan-jcache-commons:10.0.0.CR1'
  protoparser 'com.squareup:protoparser:4.0.3'
  protostream 'org.infinispan.protostream:protostream:4.3.0.Alpha11'
  jbossLogging 'org.jboss.logging:jboss-logging:3.3.2.Final'
  jGroups 'org.jgroups:jgroups:4.1.2.Final'
  reactiveStreams 'org.reactivestreams:reactive-streams:1.0.2'
  rxjava 'io.reactivex.rxjava2:rxjava:2.2.6'
}

task addCaffeineToSharedDir(type: Copy) {
  from configurations.caffeine
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'caffeine-*.jar', 'caffeine.jar'
}

task addGSONToSharedDir(type: Copy) {
  from configurations.gson
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'gson-*.jar', 'gson.jar'
}

task addInfinispanCommonsToSharedDir(type: Copy) {
  from configurations.infinispanCommons
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'infinispan-commons-10.*.jar', 'infinispan-commons.jar'
}

task addInfinispanCoreToSharedDir(type: Copy) {
  from configurations.infinispanCore
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'infinispan-core-10.*.jar', 'infinispan-core.jar'
}

task addInfinispanJCacheToSharedDir(type: Copy) {
  from configurations.infinispanJCache
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'infinispan-jcache-10.*.jar', 'infinispan-jcache.jar'
}

task addInfinispanJCacheCommonsToSharedDir(type: Copy) {
  from configurations.infinispanJCacheCommons
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'infinispan-jcache-commons-10.*.jar', 'infinispan-jcache-commons.jar'
}

task addJbossLoggingToSharedDir(type: Copy) {
  from configurations.jbossLogging
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'jboss-logging-*.jar', 'jboss-logging.jar'
}

task addJGroupsToSharedDir(type: Copy) {
  from configurations.jGroups
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'jgroups-*.jar', 'jgroups.jar'
}

task addProtoParserToSharedDir(type: Copy) {
  from configurations.protoparser
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'protoparser-*.jar', 'protoparser.jar'
}

task addProtoStreamToSharedDir(type: Copy) {
  from configurations.protostream
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'protostream-*.jar', 'protostream.jar'
}

task addReactiveStreamsToSharedDir(type: Copy) {
  from configurations.reactiveStreams
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'reactive-streams-*.jar', 'reactive-streams.jar'
}

task addRxJavaToSharedDir(type: Copy) {
  from configurations.rxjava
  into new File(autoFvtDir, 'publish/shared/resources/infinispan')
  rename 'rxjava-*.jar', 'rxjava.jar'
}

addRequiredLibraries {
  dependsOn addDerby
  dependsOn addCaffeineToSharedDir
  dependsOn addGSONToSharedDir
  dependsOn addInfinispanCommonsToSharedDir
  dependsOn addInfinispanCoreToSharedDir
  dependsOn addInfinispanJCacheToSharedDir
  dependsOn addInfinispanJCacheCommonsToSharedDir
  dependsOn addJbossLoggingToSharedDir
  dependsOn addJGroupsToSharedDir
  dependsOn addProtoParserToSharedDir
  dependsOn addProtoStreamToSharedDir
  dependsOn addReactiveStreamsToSharedDir
  dependsOn addRxJavaToSharedDir
}