<server>
    <featureManager>
    	<feature>user.feature.meta.inf.services-1.0</feature>
        <feature>servlet-3.1</feature>
        <feature>bells-1.0</feature>
        <feature>restConnector-2.0</feature>
    </featureManager>

    <include location="../fatTestPorts.xml"/>

    <!-- SPI type visibility tests use feature restConnector-2.0 to provide ibm-spi packages -->

    <library id="testSpiTypeVisible" name="testSpiTypeVisible"
            description="testSpiTypeVisible"
            spiTypeVisibility="spi">
        <fileset dir="${server.output.dir}/sharedLib" includes="testSpiTypeVisible.jar" />
    </library>

    <bell libraryRef="testSpiTypeVisible"/>

    <library id="testNoSpiTypeVisible" name="testNoSpiTypeVisible"
            description="testNoSpiTypeVisible">
        <fileset dir="${server.output.dir}/sharedLib" includes="testSpiTypeVisible.jar" />
    </library>

    <bell libraryRef="testNoSpiTypeVisible"/>

    <!--  BELL service permissions -->

    <javaPermission
        className="java.util.PropertyPermission"
        name="className"
        actions="read"
        codebase="${server.config.dir}sharedLib/testSpiTypeVisible.jar"/>

    <javaPermission
        className="java.util.PropertyPermission"
        name="loadOp"
        actions="read"
        codebase="${server.config.dir}sharedLib/testSpiTypeVisible.jar"/>

    <application location="SpiTypeVisibility.war">
        <classloader commonLibraryRef="testSpiTypeVisible"/>
    </application>

    <!--
    <logging traceSpecification="ClassLoadingService=all:SharedLibrary=all:app.manager*=all:com.ibm.ws.classloader.*=all:com.ibm.ws.classloading.bells.internal.Bell=debug" traceFileName="trace.log" maxFileSize="100" maxFiles="10" />
    -->
</server>

