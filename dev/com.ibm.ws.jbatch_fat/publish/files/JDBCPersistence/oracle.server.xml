<server>

	<featureManager>
		<feature>osgiconsole-1.0</feature>
		<feature>batch-1.0</feature>
		<feature>servlet-3.1</feature>
	</featureManager>
	
	<include location="../fatTestPorts.xml"/>

    <!-- The batch tables are located in oracle -->
    <batchPersistence jobStoreRef="BatchDatabaseStore" />

    <databaseStore id="BatchDatabaseStore" dataSourceRef="batchDB" schema="batchtest1" tablePrefix="" />


    <library id="OracleLib">
        <fileset includes="ojdbc6.jar" dir="${server.config.dir}/resources/oracle" />
    </library>

    <dataSource id="batchDB" jndiName="jdbc/batch" type="javax.sql.XADataSource">
        <jdbcDriver libraryRef="OracleLib" />
        <properties.oracle URL="jdbc:oracle:thin:@//moondb05.rtp.raleigh.ibm.com:1521/moon00" user="batchtest1" password="batchtest1pwd"/>
    </dataSource>

    <!-- The derby DB is used for temporary tables created by the test. -->
    <library id="DerbyLib">
		<fileset dir="${server.config.dir}/resources/derby" />
	</library>
	
	<!-- The following configures in-memory Derby.  For Derby on disk, which is needed if the database
   	is required beyond a single server start, configure the databaseName with a file location such as:
   	databaseName="${shared.config.dir}/data/derbydb" -->

    <!-- Derby datasource, transactional -->
    <dataSource jndiName="jdbc/myds" type="javax.sql.XADataSource">
        <jdbcDriver libraryRef="DerbyLib"/>
        <properties.derby.embedded createDatabase="create" databaseName="memory:ChunkTestTwoResources" user="user" password="pass" />
    </dataSource>

    <!-- Derby datasource , non-transactional -->
    <dataSource jndiName="jdbc/mydsNonTran" type="javax.sql.ConnectionPoolDataSource" transactional="false">
        <jdbcDriver libraryRef="DerbyLib"/>
        <properties.derby.embedded createDatabase="create" databaseName="memory:ChunkTestTwoResourcesNonTran" user="user" password="pass" />
    </dataSource>

</server>
