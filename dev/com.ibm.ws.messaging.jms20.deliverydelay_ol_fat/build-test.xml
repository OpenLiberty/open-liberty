<?xml version="1.0" encoding="UTF-8"?>
<project name="com.ibm.ws.messaging.jms20.deliverydelay_fat" default="buildandrun" basedir=".">
	<property name="javac.boot.classpath" value="1.7"/>
	<import file="../ant_build/public_imports/fat_imports.xml" />

    
	<property name="shared.resource.dir" value="${liberty.dir}/usr/shared/resources" />
	<property name="features.dir" value="${basedir}/publish/files/features" />
	
	<!-- override the standard build and run and call build for the messaging test prereqs This for building the dummyxa-->
	

	<!--<target name="private">
		<ant inheritAll="false" antfile="build-private.xml"/> 
	</target> -->
	
	<target name="addRequiredLibraries">


		<!-- Copy our bundle of utility classes in to autoFVT.zip -->
		            
		<!-- Copy our bundle of utility classes in to autoFVT.zip -->
		<mkdir dir="${features.dir}"/>
		<copy todir="${required.lib.dir}">
		<fileset dir="../build.image/wlp/lib" includes="com.ibm.ws.logging_*.jar"/>
	</copy>			

	</target>
			
	<target name="addAutoInstallApplications" description="Automatically Install applications on LibertyServer instance creation">
		<echo message="create apps" />
		<mkdir dir="${basedir}/publish/servers/ClientServer/apps" />	
		<move file="${basedir}/publish/files/jmsmdb.zip" tofile="${basedir}/publish/servers/ClientServer/apps/jmsmdb.jar"/>	
		<zip destfile="${basedir}/publish/servers/ClientServer/apps/jmsapp.ear" >
				           <!-- <zipfileset dir="${basedir}/publish/files/jmsapp" includes="**"/> -->
				        	<zipfileset dir="${basedir}/publish/servers/ClientServer/apps" includes="*.jar"/>
		  </zip>		
				
		<mkdir dir="${basedir}/publish/servers/ClientServer/dropins"/>
	
					<copy todir="${basedir}/publish/servers/ClientServer/dropins">
								    	<fileset dir="../com.ibm.ws.security.registry_test.servlet/build/test-application" includes="*.war"/>
								    </copy>
			
			
		<move file="${basedir}/publish/files/DeliveryDelay.zip" tofile="${basedir}/publish/servers/ClientServer/dropins/DeliveryDelay.war"/>
		<delete>
				            <fileset dir="${basedir}/publish/servers/ClientServer/apps">
				                <include name="jmsmdb.jar"/>
				            </fileset>
				        </delete>
		
	</target>
</project>