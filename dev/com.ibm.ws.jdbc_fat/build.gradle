/*******************************************************************************
 * Copyright (c) 2019 IBM Corporation and others.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *     IBM Corporation - initial API and implementation
 *******************************************************************************/
 configurations {
  db2
  derbyClient
}

dependencies {
  db2 'com.ibm.db2:jcc:11.1.4.4'
  derbyClient 'org.apache.derby:derbyclient:10.11.1.1'
  requiredLibs 'org.apache.derby:derbynet:10.11.1.1'
}
 
 //Anonymous derby jar
 task copyAnonymousDerby(type: Copy) {
  shouldRunAfter jar
  from configurations.derby
  into new File(autoFvtDir, 'publish/shared/resources/jdbc')
  rename 'derby-.*.jar', 'driver.jar'
 }
 
 //Derby client jar
 task addDerbyClient(type: Copy) {
  shouldRunAfter jar
  from configurations.derbyClient
  into new File(autoFvtDir, 'publish/shared/resources/derby')
  rename 'derbyclient.*.jar', 'derbyclient.jar'
}

 //Automatically discovered derby jar
 task copyAutomaticDerby(type: Copy) {
  shouldRunAfter jar
  from configurations.derby
  into new File(autoFvtDir, 'publish/lib/AutomaticDerbyLibrary/')
  rename 'derby-.*.jar', 'derby.jar'
 }

 //DB2 jar
 task copyDB2(type: Copy) {
  shouldRunAfter jar
  from configurations.db2
  into new File(autoFvtDir, 'publish/shared/resources/db2')
  rename 'jcc.*.jar', 'jcc.jar'
 }


 addRequiredLibraries {
  dependsOn addDerby
  dependsOn copyAnonymousDerby
  dependsOn addDerbyClient
  dependsOn copyAutomaticDerby
  dependsOn copyDB2
 }