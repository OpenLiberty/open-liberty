<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <!-- This is a simple JSF facelet; it utilizes EL to check if we're currently in a flow.
          If we are in a flow, the currentFlow value should be true.
          The flowScope value is checked to determine if that data is being passed around the flow correctly;
          the flowScope value can be modified via the text input on this page and the "Submit Value" button.
          The back button causes us to exit the flow.

          We also check to see if the testBean.testValue is set.
    -->
    <h:head>
        <title>JSF 2.2 Faces Flows Test Page</title>
    </h:head>
    <h:body>
        initialize() and finalize() flow page 2<br/>
        In flow ? #{null != facesContext.application.flowHandler.currentFlow}<br/>
        Flow Id: #{empty facesContext.application.flowHandler.currentFlow.id ? "no flow ID" : facesContext.application.flowHandler.currentFlow.id}<br/>
        Current flowscope value: #{empty flowScope.testValue ? "no flowscope value" : flowScope.testValue}
        Current testBeanInitFinalize.testValue value: #{empty testBeanInitFinalize.testValue ? "testBeanInitFinalize.testValue not set" : testBeanInitFinalize.testValue}<br/>
        <h:form prependId="false" id="form">
            <h:commandButton id="button1" value="Back (still in flow)" action="initializeFinalize"/>
            <h:commandButton id="button2" value="Next (exit flow)" action="goReturn"/>
        </h:form>
    </h:body>
</html>
