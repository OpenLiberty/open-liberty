# *******************************************************************************
# Copyright (c) 2019 IBM Corporation and others.
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Eclipse Public License v1.0
# which accompanies this distribution, and is available at
# http://www.eclipse.org/legal/epl-v10.html
#
# Contributors:
#     IBM Corporation - initial API and implementation
# *******************************************************************************
openapi: "3.0.2"
info:
  title: Validation API
  version: "1.0"
  description: Tests the basic configuration of resources by attempting to perform a simple operation on them.
servers:
  - url: https://127.0.0.1:8020/ibm/api
paths:
  /validation/dataSource/{uid}:
    get:
      summary: Validation of a Data Source
      tags:
      - Validation
      description: "Retrieves the validation result for the specified data source. Validation involves establishing a connection to the database, querying basic metadata information, and performing the `java.sql.Connection.isValid` operation."
      parameters:
        - name: uid
          in: path
          description: "**Unique identifier**. For a data source configured at top level, this is the value of the `id` attribute, if present. Otherwise, it is a generated value, such as `databaseStore[defaultDatabaseStore]/dataSource[default-0]`."
          required: true
          schema:
            type: string
        - name: X-Validation-User
          in: header
          description: "**User**. Supplies a user name when not using Container-managed authentication."
          schema:
            type: string
        - name: X-Validation-Password
          in: header
          description: "**Password**. Supplies a password when not using Container-managed authentication."
          schema:
            type: string
            format: password
        - name: auth
          in: query
          description: "**Authentication**. Determines whether to use a resource reference with Application-managed or Container-managed authentication, or no resource reference."
          schema:
           type: string
           enum:
             - application
             - container
        - name: authAlias
          in: query
          description: "**Authentication Alias**. Supplies the `id` of an `authData` to use for Container-managed authentication."
          schema:
            type: string
        - name: loginConfig
          in: query
          description: "**Custom Login**. Supplies the `name` of a `jaasLoginContextEntry` to use for Container-managed authentication."
          schema:
            type: string
      responses:
        200:
          description: Validation result retrieved
          content:
            application/json:
              schema:
                type: object
