/*******************************************************************************
 * Copyright (c) 2017 IBM Corporation and others.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *     IBM Corporation - initial API and implementation
 *******************************************************************************/
if(_MF_SINGLTN){_MF_SINGLTN(_PFX_UTIL+"DomQuirks",myfaces._impl._util._Dom,{IE_QUIRKS_EVENTS:{"onabort":true,"onload":true,"onunload":true,"onchange":true,"onsubmit":true,"onreset":true,"onselect":true,"onblur":true,"onfocus":true,"onkeydown":true,"onkeypress":true,"onkeyup":true,"onclick":true,"ondblclick":true,"onmousedown":true,"onmousemove":true,"onmouseout":true,"onmouseover":true,"onmouseup":true},constructor_:function(){var A=myfaces._impl.core._Runtime.browser;if(A.isIEMobile&&A.isIE<=6){myfaces.config=myfaces.config||{};myfaces.config._autoeval=false;return ;}else{if("undefined"!=typeof myfaces.config&&"undefined"!=typeof myfaces.config._autoeval){delete myfaces.config._autoeval;}}this._callSuper("constructor_");myfaces._impl._util._Dom=this;var B=this._Lang;var D=B.hitch(this,this.isManualScriptEval);if(window){this._RT.addOnLoad(window,D);}if(document.body){this._RT.addOnLoad(document.body,D);}var C=this;if(myfaces._impl.core.Impl){this._RT.iterateClasses(function(E){if(E._Dom){E._Dom=C;}});}},isDomCompliant:function(){if("undefined"==typeof this._isCompliantBrowser){this._isCompliantBrowser=!!((window.Range&&typeof Range.prototype.createContextualFragment=="function")||document.querySelectoryAll||document.createTreeWalker);}return this._isCompliantBrowser;},_outerHTMLNonCompliant:function(E,B){var A=this._RT.browser;try{var F=this._buildEvalNodes(E,B);if(F.length==1){var C=F[0];this.replaceElement(E,F[0]);return C;}else{return this.replaceElements(E,F);}}finally{var D=this.getDummyPlaceHolder();if(A.isIE&&A.isIE<8){this._removeChildNodes(D,false);}D.innerHTML="";}},replaceElement:function(B,A){var C=this._RT.browser;if(!C.isIE||C.isIE>=8){B.parentNode.replaceChild(A,B);}else{this._callSuper("replaceElement",B,A);}},_buildNodesNonCompliant:function(B){var A=this.getDummyPlaceHolder();A.innerHTML="<table><tbody><tr><td><div></div></td></tr></tbody></table>";var G=this._determineDepth(A);this._removeChildNodes(A,false);A.innerHTML="";var E=this.getDummyPlaceHolder();E.innerHTML="<table><tbody><tr><td>"+B+"</td></tr></tbody></table>";var F=E;for(var D=0;D<G;D++){F=F.childNodes[0];}var C=(F.parentNode)?this.detach(F.parentNode.childNodes):null;if("undefined"==typeof F||null==F){E.innerHTML="<div>"+B+"</div>";F=this.detach(E.childNodes[0].childNodes);}this._removeChildNodes(E,false);return C;},_determineDepth:function(A){var C=0;var B=A;for(;B&&B.childNodes&&B.childNodes.length&&B.nodeType==1;C++){B=B.childNodes[0];}return C;},_removeNode:function(C,B){if(!C){return ;}var A=this._RT.browser;if(this.isDomCompliant()){if("undefined"!=typeof C.parentNode&&null!=C.parentNode){C.parentNode.removeChild(C);}return ;}this._removeChildNodes(C,B);try{if(!this._isTableElement(C)){C.innerHTML="";}if(A.isIE&&"undefined"!=typeof C.outerHTML){C.outerHTML="";}else{C=this.detach(C)[0];}if(!A.isIEMobile){delete C;}}catch(D){try{this.detach(C);if(!A.isIEMobile){delete C;}}catch(E){}}},_removeChildNodes:function(E,D){if(!E){return ;}var H=this.TABLE_ELEMS;var A=this._RT.browser;if(D){this.breakEvents(E);}for(var C=E.childNodes.length-1;C>=0;C-=1){var B=E.childNodes[C];if("undefined"!=typeof B.childNodes&&E.childNodes.length){this._removeChildNodes(B);}try{var G=(B.nodeName||B.tagName)?(B.nodeName||B.tagName).toLowerCase():null;if(!H[G]){if(!this._isTableElement(B)){B.innerHTML="";}if(A.isIE&&A.isIE<8&&"undefined"!=typeof B.outerHTML){B.outerHTML="";}else{E.removeChild(B);}if(!A.isIEMobile){delete B;}}}catch(F){}}},getAttribute:function(D,A){D=this.byId(D);if((!D)||(!D.getAttribute)){return null;}var C=typeof A=="string"?A:new String(A);var B=D.getAttribute(C.toUpperCase());if((B)&&(typeof B=="string")&&(B!="")){return B;}if(B&&B.value){return B.value;}if((D.getAttributeNode)&&(D.getAttributeNode(C))){return(D.getAttributeNode(C)).value;}else{if(D.getAttribute(C)){return D.getAttribute(C);}else{if(D.getAttribute(C.toLowerCase())){return D.getAttribute(C.toLowerCase());}}}return null;},setAttribute:function(B,A,D){this._assertStdParams(B,A,"setAttribute");var C=this._RT.browser;if(!C.isIE||C.isIE>7&&this.isDomCompliant()){this._callSuper("setAttribute",B,A,D);return ;}A=A.toLowerCase();if(A==="class"){B.className=D;}else{if(A==="name"){B[A]=D;}else{if(A==="for"){if(!C.isIEMobile||C.isIEMobile>=7){B.setAttribute("htmlFor",D);}else{B.htmlFor=D;}}else{if(A==="style"){B.style.cssText=D;}else{if(this.IE_QUIRKS_EVENTS[A]){if(this._Lang.isString(A)){var E=document.body.appendChild(document.createElement("span"));try{E.innerHTML="<span "+A+'="'+D+'"/>';B[A]=E.firstChild[A];}finally{document.body.removeChild(E);}}}else{if(!C.isIEMobile||C.isIEMobile>=7){B.setAttribute(A,D);}else{B[A]=D;}}}}}}},getDummyPlaceHolder:function(){this._callSuper("getDummyPlaceHolder");if(this._RT.browser.isIEMobile&&created){this.insertFirst(this._dummyPlaceHolder);this.setAttribute(this._dummyPlaceHolder,"style","display: none");}return this._dummyPlaceHolder;},_recursionSearchAll:function(B,E,F){var C=[];if(E(B)){C.push(B);if(!F){return C;}}if(!B.childNodes){return C;}var G=C.length;var A=B.childNodes.length;for(var D=0;(F||G==0)&&D<A;D++){C=C.concat(this._recursionSearchAll(B.childNodes[D],E,F));}return C;},breakEvents:function(C){if(!C){return ;}var B=this.IE_QUIRKS_EVENTS;for(var A in B){if(!B.hasOwnProperty(A)){continue;}if(A!="onunload"&&C[A]){C[A]=null;}}},isManualScriptEval:function(){if(!this._Lang.exists(myfaces,"config._autoeval")){var B=document.createElement("div");this._Lang.reserveNamespace("myfaces.config._autoeval");myfaces.config._autoeval=false;var A="<script type='text/javascript'> myfaces.config._autoeval = true; <\/script>";this.setAttribute(B,"style","display:none");this.insertFirst(B);if(this.isDomCompliant()){this._outerHTMLCompliant(B,A);}else{this._outerHTMLNonCompliant(B,A);}}return !myfaces.config._autoeval;},getNamedElementFromForm:function(F,A){var C=this._RT.browser;if(C.isIE&&C.isIE<8){if(!F.elements){return null;}for(var E=0,B=F.elements.length;E<B;E++){var D=F.elements[E];if(D.name==A){return D;}}return null;}else{return F[A];}}});}