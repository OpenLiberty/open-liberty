/*******************************************************************************
 * Copyright (c) 2017 IBM Corporation and others.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *     IBM Corporation - initial API and implementation
 *******************************************************************************/
(function(){var D=window||document.body;var A="myfaces._impl.";var E={_PFX_UTIL:A+"_util.",_PFX_CORE:A+"core.",_PFX_XHR:A+"xhrCore.",_PFX_I18N:A+"i18n."};if("undefined"!=typeof D.myfaces){var C=myfaces._impl.core._Runtime;E._MF_CLS=C.extendClass;E._MF_SINGLTN=C.singletonExtendClass;}else{E._MF_CLS=false;E._MF_SINGLTN=false;D.myfaces={};}D.myfaces._implTemp={};for(var B in E){D.myfaces._implTemp[B]=D[B];D[B]=E[B];}})();_MF_SINGLTN(_PFX_UTIL+"_Logging",_MF_OBJECT,{_ERR:"error",_INF:"info",_DEB:"debug",_LOG:"log",_WRN:"warn",_Lang:myfaces._impl._util._Lang,constructor_:function(){this._callSuper("constructor_");this._browser=myfaces._impl.core._Runtime.browser;this.logLevels={};this.stackTraceLevels={};var B=this.logLevels;var E=this.stackTraceLevels;var D=[this._ERR,this._INF,this._DEB,this._LOG,this._WRN];for(var A=0;A<D.length;A++){var C=D[A];B[C]=true;E[C]=false;}E[this._ERR]=true;},_log:function(J,F){var I=this._Lang.objToArray(arguments[1]).join("|");var G=window.console;if(G&&G[J]){G[J](I);if(this.stackTraceLevels[J]&&G.trace){G.trace();}}var E=document.getElementById("myfaces.logging");if(E){var C=document.createElement("div");var H=this._browser;if(!H.isIE||H.isIE>7){C.setAttribute("class","consoleLog "+J);}else{C.className="consoleLog "+J;}E.appendChild(C);var A=this._Lang.objToArray(arguments[1]);var D=[];for(var B=0;B<A.length;B++){D.push("<div class='args args_"+B+"'>");D.push(A[B]);D.push("</div>");}C.innerHTML="<div class='args argsinfo'>"+J.toUpperCase()+"</div>"+D.join("");E.scrollTop=E.scrollHeight;}},logError:function(){if(!this.logLevels[this._ERR]){return ;}this._log(this._ERR,arguments);},logWarn:function(){if(!this.logLevels[this._WRN]){return ;}this._log(this._WRN,arguments);},logInfo:function(){if(!this.logLevels[this._INF]){return ;}this._log(this._INF,arguments);},logDebug:function(){if(!this.logLevels[this._DEB]){return ;}this._log(this._DEB,arguments);},logTrace:function(){if(!this.logLevels[this._LOG]){return ;}this._log("log",arguments);}});if(_MF_SINGLTN){_MF_SINGLTN(_PFX_UTIL+"_DomExperimental",myfaces._impl._util._Dom,{constructor_:function(){this._callSuper("constructor_");myfaces._impl._util._Dom=this;},html5FormDetection:function(B){var A=this._RT.browser;if(A.isIEMobile&&A.isIEMobile<=8){return null;}var C=this.getAttribute(B,"form");return(C)?this.byId(C):null;},getNamedElementFromForm:function(B,A){return B[A];}});}_MF_SINGLTN&&_MF_SINGLTN(_PFX_UTIL+"_ExtDom",myfaces._impl._util._Dom,{_Lang:myfaces._impl._util._Lang,_RT:myfaces._impl.core._Runtime,constructor_:function(){this._callSuper("constructor_");var A=this;if(myfaces._impl.core.Impl){this._RT.iterateClasses(function(B){if(B._Dom){B._Dom=A;}});}myfaces._impl._util._Dom=A;},findByStyleClass:function(C,B,E){var D=this._Lang.hitch(this,function(J){var I=this.getClasses(J);var G=I.length;if(G==0){return false;}else{for(var H=0;H<G;H++){if(I[H]===B){return true;}}}return false;});try{E=!!E;if(this._Lang.exists(C,"querySelectorAll")&&E){try{var A=C.querySelectorAll("."+B.replace(/\./g,"\\."));if(C.nodeType==1&&D(C)){A=(A==null)?[]:A;A=this._Lang.objToArray(A);A.push(C);}return A;}catch(F){}}else{return this._callSuper("findAll",C,D,E);}}finally{D=null;}},getElementFromForm:function(G,E,D,A){if(!G){throw this._Lang.makeException(new Error(),null,null,this._nameSpace,"getElementFromForm","_Dom.getElementFromForm an item id or name must be given");}if(!E){return this.byId(G);}var B=!!D;var F=!!A;if(B&&this._Lang.exists(E,"elements."+G)){return E.elements[G];}var C=this.findById(E,G);if(C){return C;}if(!F){return this.byId(G);}return null;},findFormElement:function(A,B){this._assertStdParams(A,B,"findFormElement");if(!A.elements){return null;}return A.elements[B]||this.findById(A,B);},findById:function(A,D){if(A.getElementById){return A.getElementById(D);}if(A.nodeType==1&&A.querySelector){try{var E=D;if(A.id&&A.id===D){return A;}if(this._Lang.isString(E)){E=E.replace(/\./g,"\\.").replace(/:/g,"\\:");}return A.querySelector("#"+E);}catch(C){}}var B=function(F){return F&&F.id&&F.id===D;};try{return this.findFirst(A,B);}finally{B=null;}},findFirst:function(A,B){this._Lang.assertType(B,"function");if(document.createTreeWalker&&NodeFilter){return this._iteratorFindFirst(A,B);}else{return this._recursionFindFirst(A,B);}},_recursionFindFirst:function(B,D){if(D(B)){return B;}if(!B.childNodes){return null;}var F;var C;var A=B.childNodes.length;for(C=0;C<A;C++){F=B.childNodes[C];var E=this._recursionFindFirst(F,D);if(E!=null){return E;}}return null;},_iteratorFindFirst:function(A,C){if(C(A)){return A;}var B=function(E){return(C(E))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP;};var D=document.createTreeWalker(A,NodeFilter.SHOW_ELEMENT,B,false);if(D.nextNode()){return D.currentNode;}return null;},getFilteredChild:function(B,A){this._assertStdParams(B,A,"getFilteredChild");var D=B.childNodes;if(!D){return null;}for(var E=0,C=D.length;E<C;E++){if(A(D[E])){return D[E];}}return null;},getChild:function(D,A,E){var B=this._Lang;function C(F){return F.tagName&&B.equalsIgnoreCase(F.tagName,A)&&(!E||(E&&E==F.getAttribute("name")));}return this.getFilteredChild(D,C);},getClass:function(B){B=this.byId(B);if(!B){return"";}var A="";if(B.className){A=B.className;}else{if(this.hasAttribute(B,"class")){A=this.getAttribute(B,"class");}}return A.replace(/^\s+|\s+$/g,"");},getClasses:function(A){var B=this.getClass(A);return(B=="")?[]:B.split(/\s+/g);},_isTable:function(A){return"table"==(A.nodeName||A.tagName).toLowerCase();},deleteScripts:function(B){if(!B||!B.length){return ;}var A=B.length;for(var C=0;C<A;C++){var D=B[C];var E=D.getAttribute("src");if(E&&E.length>0&&(E.indexOf("/jsf.js")!=-1||E.indexOf("/jsf-uncompressed.js")!=-1)){continue;}this.deleteItem(D);}}});_MF_CLS(_PFX_XHR+"engine.IFrame",myfaces._impl.xhrCore.engine.BaseRequest,{_finalized:false,_frame:null,_aborted:false,CLS_NAME:"myfaces._impl.xhrCore._IFrameRequest",_FRAME_ID:"_mf_comm_frm",constructor_:function(A){this._callSuper("constructor",A);this._initDefaultFinalizableFields();this._XHRConst=myfaces._impl.xhrCore.engine.XhrConst;this._Lang.applyArgs(this,A);this.readyState=this._XHRConst.READY_STATE_UNSENT;this._startTimeout();},setRequestHeader:function(A,B){},open:function(F,A,C){this.readyState=this._XHRConst.READY_STATE_OPENED;var E=myfaces._impl.core._Runtime;var B=this._Lang;this._frame=this._createTransportFrame();if(!E.browser.isIE||this._Dom.isDomCompliant()){this._frame.onload=B.hitch(this,this._callback);}else{this._frame.onload_IE=B.hitch(this,this._callback);}this.method=F||this.method;this.url=A||this.url;this.async=("undefined"!=typeof C)?C:this.async;var D={};this._addProgressAttributes(D,10,100);this.onprogress(D);},send:function(D){var B={};this._addProgressAttributes(B,20,100);this.onloadstart(B);this.onprogress(B);var F=D.form,C=F.target,E=F.method,A=F.action;try{F.target=this._frame.name;F.method=this.method;if(this.url){F.action=this.url;}this.readyState=this._XHRConst.READY_STATE_LOADING;this.onreadystatechange(B);F.submit();}finally{F.action=A;F.target=C;F.method=E;D._finalize();this._finalized=true;}},abort:function(){this._aborted=true;this.onabort({});},_addProgressAttributes:function(A,C,B){A.lengthComputable=true;A.loaded=C;A.total=B;},_callback:function(){if(this._aborted){return ;}if(this._timeoutTimer){clearTimeout(this._timeoutTimer);}if(!this._finalized){setTimeout(this._Lang.hitch(this,this._callback),10);return ;}try{var A={};this._addProgressAttributes(A,100,100);this.responseText=this._getFrameText();this.responseXML=this._getFrameXml();this.readyState=this._XHRConst.READY_STATE_DONE;this.onreadystatechange(A);this.onloadend();if(!this._Lang.isXMLParseError(this.responseXML)){this.status=201;this.onload();}else{this.status=0;this.onerror();}}finally{this._frame=null;}},_getFrameDocument:function(){return this._frame.contentWindow.document||this._frame.contentDocument||this._frame.document;},_getFrameText:function(){var B=this._getFrameDocument();var A=B.body||B.documentElement;return A.innerHTML;},_clearFrame:function(){var B=this._getFrameDocument();var A=B.documentElement||B.body;if(myfaces._impl.core._Runtime.browser.isIE){this._Dom._removeChildNodes(A,false);}else{A.innerHTML="";}},_getFrameXml:function(){var A=this._getFrameDocument();return A.XMLDocument||A;},_createTransportFrame:function(){var B=this._FRAME_ID;var D=document.getElementById(B);if(D){return D;}if(this._Dom.isDomCompliant()){D=this._Dom.createElement("iframe",{"src":"about:blank","id":B,"name":B,"type":"content","collapsed":"true","style":"display:none"});document.body.appendChild(D);}else{var C=this._Dom.createElement("div",{"style":"display:none"});C.innerHTML="<iframe id='"+B+"' name='"+B+"' style='display:none;' src='about:blank' type='content' onload='this.onload_IE();'  ></iframe>";var A=document.body;if(A.firstChild){A.insertBefore(C,document.body.firstChild);}else{A.appendChild(C);}}return document.getElementById(B);},_startTimeout:function(){if(this.timeout==0){return ;}this._timeoutTimer=setTimeout(this._Lang.hitch(this,function(){if(this._xhrObject.readyState!=this._XHRConst.READY_STATE_DONE){this._aborted=true;clearTimeout(this._timeoutTimer);this.ontimeout({});this._timeoutTimer=null;}}),this.timeout);}});myfaces._impl.xhrCore._AjaxRequest=_MF_CLS(_PFX_XHR+"_ExtAjaxRequest",myfaces._impl.xhrCore._AjaxRequest,{constructor_:function(A){this._callSuper("constructor_",A);},getFormData:function(){var C=this._AJAXUTIL,A=this._context.myfaces,B=null;if(!this._partialIdsArray||!this._partialIdsArray.length){B=this._callSuper("getFormData");if(this._source&&A&&A.form){C.appendIssuingItem(this._source,B);}}else{B=this._Lang.createFormDataDecorator(new Array());C.encodeSubmittableFields(B,this._sourceForm,this._partialIdsArray);if(this._source&&A&&A.form){C.appendIssuingItem(this._source,B);}}return B;}});_MF_CLS(_PFX_XHR+"_IFrameRequest",myfaces._impl.xhrCore._AjaxRequest,{MF_PART_IFRAME:"javax.faces.transport.iframe",MF_PART_FACES_REQUEST:"javax.faces.request",constructor_:function(A){this._callSuper("constructor_",A);},getFormData:function(){var D=new myfaces._impl.xhrCore.engine.FormData(this._sourceForm);D.append(this.MF_PART_IFRAME,"true");D.append(this.MF_PART_FACES_REQUEST,"partial/ajax");var F=decodeURIComponent(jsf.getViewState(this._sourceForm));F=F.split("&");for(var E=0,B=F.length;E<B;E++){var G=F[E];var A=G.split("=");var C=A[0];if(!this._Dom.getNamedElementFromForm(this._sourceForm,C)){D.append(C,A[1]);}}return D;},_formDataToURI:function(){return"";},_getTransport:function(){return new myfaces._impl.xhrCore.engine.IFrame();}});_MF_SINGLTN(_PFX_XHR+"_PartialSubmitUtils",myfaces._impl.xhrCore._AjaxUtils,{_AjaxUtils:myfaces._impl.xhrCore._AjaxUtils,constructor_:function(){this._callSuper("constructor_");myfaces._impl.xhrCore._AjaxUtils=this;},encodeSubmittableFields:function(C,A,B){if(!A){throw"NO_PARITEM";}if(B){this.encodePartialSubmit(A,false,B,C);}else{this._callSuper("encodeSubmittableFields",C,A,B);}},encodePartialSubmit:function(D,M,E,G){var F=this._Lang;var J=this.attr("impl");var I=this._Dom;var B=function(N){if(N.nodeType!=1){return false;}if(M&&D!=N){return true;}var O=N.id||N.name;return(O&&F.contains(E,O))||O==J.P_VIEWSTATE;};var A=I.findAll(D,B,false);var L={"input":true,"select":true,"textarea":true};if(A&&A.length){for(var C=0;C<A.length;C++){var K=(A[C].tagName.toLowerCase()=="form")?D.elements:I.findByTagNames(A[C],L,true);if(K&&K.length){for(var H=0;H<K.length;H++){this.encodeElement(K[H],G);}}else{this.encodeElement(A[C],G);}}}this.appendViewState(D,G);},appendViewState:function(A,F){var D=this._Dom;var E=this.attr("impl");if(F.hasKey&&F.hasKey(E.P_VIEWSTATE)){return ;}var C=D.findByName(A,E.P_VIEWSTATE);if(C&&C.length){for(var B=0;B<C.length;B++){this.encodeElement(C[B],F);}}}});(function(){var C=window||document;var B=function(F){var E=C.myfaces._implTemp;(!!E[F])?C[F]=E[F]:null;},D=["_MF_CLS","_MF_SINGLTN","_MF_OBJECT","_PFX_UTIL","_PFX_XHR","_PFX_CORE","_PFX_I18N"];for(var A=D.length-1;A>=0;A--){B(D[A]);}})();