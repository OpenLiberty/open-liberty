/*******************************************************************************
 * Copyright (c) 2017 IBM Corporation and others.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *     IBM Corporation - initial API and implementation
 *******************************************************************************/
_MF_SINGLTN(_PFX_UTIL+"_Lang",Object,{_processedExceptions:{},_installedLocale:null,_RT:myfaces._impl.core._Runtime,getMessage:function(C,B){if(!this._installedLocale){this.initLocale();}var D=this._installedLocale[C]||B||C+" - undefined message";for(var A=2;A<arguments.length;A++){D=D.replace(new RegExp(["\\{",A-2,"\\}"].join(""),"g"),new String(arguments[A]));}return D;},initLocale:function(A){if(A){this._installedLocale=new A();return ;}var D=this._RT.getLanguage(this._RT.getGlobalConfig("locale")),C=D?D.language:"",F=D?[D.language,"_",D.variant||""].join(""):"",E=myfaces._impl.i18n,B=E["Messages_"+F]||E["Messages_"+C]||E["Messages"];this._installedLocale=new B();},assertType:function(A,B){return this._RT.assertType(A,B);},exists:function(A,B){return this._RT.exists(A,B);},fetchNamespace:function(A){this._assertStr(A,"fetchNamespace","namespace");return this._RT.fetchNamespace(A);},reserveNamespace:function(A){this._assertStr(A,"reserveNamespace","namespace");return this._RT.reserveNamespace(A);},globalEval:function(A){this._assertStr(A,"globalEval","code");return this._RT.globalEval(A);},getEvent:function(A){A=(!A)?window.event||{}:A;return A;},getEventTarget:function(A){A=this.getEvent(A);var B=A.srcElement||A.target||A.source||null;while((B)&&(B.nodeType!=1)){B=B.parentNode;}return B;},equalsIgnoreCase:function(B,A){if(!B&&!A){return true;}if(!B||!A){return false;}return B.toLowerCase()===A.toLowerCase();},byId:function(A){if(!A){throw this.makeException(new Error(),null,null,this._nameSpace,"byId",this.getMessage("ERR_REF_OR_ID",null,"_Lang.byId","reference"));}return(this.isString(A))?document.getElementById(A):A;},strToArray:function(C,D){this._assertStr(C,"strToArray","it");if(!D){throw this.makeException(new Error(),null,null,this._nameSpace,"strToArray",this.getMessage("ERR_PARAM_STR_RE",null,"myfaces._impl._util._Lang.strToArray","splitter"));}var E=C.split(D);var A=E.length;for(var B=0;B<A;B++){E[B]=this.trim(E[B]);}return E;},_assertStr:function(A,B,C){if(!this.isString(A)){throw this.makeException(new Error(),null,null,this._nameSpace,arguments.caller.toString(),this.getMessage("ERR_PARAM_STR",null,"myfaces._impl._util._Lang."+B,C));}},trim:function(C){this._assertStr(C,"trim","str");C=C.replace(/^\s\s*/,"");var A=/\s/,B=C.length;while(A.test(C.charAt(--B))){}return C.slice(0,B+1);},isString:function(A){return !!arguments.length&&A!=null&&(typeof A=="string"||A instanceof String);},hitch:function(A,B){return !A?B:function(){return B.apply(A,arguments||[]);};},mixMaps:function(D,G,C,B,F){if(!D||!G){throw this.makeException(new Error(),null,null,this._nameSpace,"mixMaps",this.getMessage("ERR_PARAM_MIXMAPS",null,"_Lang.mixMaps"));}var A="undefined";for(var E in G){if(!G.hasOwnProperty(E)){continue;}if(B&&B[E]){continue;}if(F&&!F[E]){continue;}if(!C){D[E]=(A!=typeof D[E])?D[E]:G[E];}else{D[E]=(A!=typeof G[E])?G[E]:D[E];}}return D;},contains:function(A,B){if(!A||!B){throw this.makeException(new Error(),null,null,this._nameSpace,"contains",this.getMessage("ERR_MUST_BE_PROVIDED",null,"_Lang.contains","arr {array}","str {string}"));}return this.arrIndexOf(A,B)!=-1;},arrToMap:function(B,E){var C=new Array(B.length);var A=B.length;E=(E)?E:0;for(var D=0;D<A;D++){C[B[D]]=D+E;}return C;},objToArray:function(E,G,B){if(!E){return null;}if(E instanceof Array&&!G&&!B){return E;}var F=("undefined"!=typeof G||null!=G)?G:0;var D=B||[];try{return D.concat(Array.prototype.slice.call(E,F));}catch(C){for(var A=F;A<E.length;A++){D.push(E[A]);}return D;}},arrForEach:function(A,C){if(!A||!A.length){return ;}var B=Number(arguments[2])||0;var D=arguments[3];A=this.objToArray(A);(B)?A.slice(B).forEach(C,D):A.forEach(C,D);},arrFilter:function(A,B){if(!A||!A.length){return[];}A=this.objToArray(A);return((startPos)?A.slice(startPos).filter(B,thisObj):A.filter(B,thisObj));},arrIndexOf:function(A,B){if(!A||!A.length){return -1;}var C=Number(arguments[2])||0;A=this.objToArray(A);return A.indexOf(B,C);},applyArgs:function(D,C,A){var B="undefined";if(A){for(var F=0;F<C.length;F++){if(B!=typeof D["_"+A[F]]){D["_"+A[F]]=C[F];}if(B!=typeof D[A[F]]){D[A[F]]=C[F];}}}else{for(var E in C){if(!C.hasOwnProperty(E)){continue;}if(B!=typeof D["_"+E]){D["_"+E]=C[E];}if(B!=typeof D[E]){D[E]=C[E];}}}},keyValToStr:function(C,E,A){var B=[],D=this.hitch(B,B.push);D(C);D(E);A=A||"\n";D(A);return B.join("");},parseXML:function(A){try{var C=new DOMParser();return C.parseFromString(A,"text/xml");}catch(B){return null;}},serializeXML:function(A,B){if(!B){if(A.data){return A.data;}if(A.textContent){return A.textContent;}}return(new XMLSerializer()).serializeToString(A);},serializeChilds:function(C){var A=[];if(!C.childNodes){return"";}for(var B=0;B<C.childNodes.length;B++){A.push(this.serializeXML(C.childNodes[B]));}return A.join("");},isXMLParseError:function(B){if(B==null){return true;}var A=function(E){if(!E||!E.childNodes){return false;}for(var D=0;D<E.childNodes.length;D++){var C=E.childNodes[D];if(C.tagName&&C.tagName=="parsererror"){return true;}}return false;};return !B||(this.exists(B,"parseError.errorCode")&&B.parseError.errorCode!=0)||A(B);},fetchXMLErrorMessage:function(H,C){var I=this;var D=function(P){if(!P||!P.childNodes){return false;}for(var O=0;O<P.childNodes.length;O++){var N=P.childNodes[O];if(N.tagName&&N.tagName=="parsererror"){var M=I.serializeXML(N.childNodes[0]);var K=M.split("\n");K=K[K.length-1];var J=K.match(/[^0-9]*([0-9]+)[^0-9]*([0-9]+)[^0-9]*/);var L={errorMessage:M,sourceText:I.serializeXML(N.childNodes[1].childNodes[0])};if(J){L.line=Math.max(0,parseInt(J[1])-1);L.linePos=Math.max(0,parseInt(J[2])-1);}return L;}}return null;};var F=null;if(!C){F=(this.trim(H||"").length>0)?{errorMessage:"Illegal response",sourceText:""}:{errorMessage:"Empty Response",sourceText:""};}else{if(this.exists(C,"parseError.errorCode")&&C.parseError.errorCode!=0){F={errorMessage:C.parseError.reason,line:Math.max(0,parseInt(C.parseError.line)-1),linePos:Math.max(0,parseInt(C.parseError.linepos)-1),sourceText:C.parseError.srcText};}else{F=D(C);}}if(F&&"undefined"!=typeof F.line){var A=F.sourceText||"";A=A.split("\n");if(A.length-1<F.line){return F;}A=A[F.line];var G=[];var E=(F.linePos-2);for(var B=0;B<E;B++){G.push(" ");}G.push("^^");F.sourceText=A;F.visualError=G;}return F;},createFormDataDecorator:function(B){var C=null;var A=null;if(!this.FormDataDecoratorArray){this.FormDataDecoratorArray=function(D){this._valBuf=D;this._idx={};};C=this.FormDataDecoratorArray;C.prototype.append=function(D,E){this._valBuf.push([encodeURIComponent(D),encodeURIComponent(E)].join("="));this._idx[D]=true;};C.prototype.hasKey=function(D){return !!this._idx[D];};C.prototype.makeFinal=function(){return this._valBuf.join("&");};}if(!this.FormDataDecoratorString){this.FormDataDecoratorString=function(D){this._preprocessedData=D;this._valBuf=[];this._idx={};};C=this.FormDataDecoratorString;C.prototype.append=function(D,E){this._valBuf.push([encodeURIComponent(D),encodeURIComponent(E)].join("="));this._idx[D]=true;};C.prototype.hasKey=function(D){return !!this._idx[D];};C.prototype.makeFinal=function(){if(this._preprocessedData!=""){return this._preprocessedData+"&"+this._valBuf.join("&");}else{return this._valBuf.join("&");}};}if(!this.FormDataDecoratorOther){this.FormDataDecoratorOther=function(D){this._valBuf=D;this._idx={};};C=this.FormDataDecoratorOther;C.prototype.append=function(D,E){this._valBuf.append(D,E);this._idx[D]=true;};C.prototype.hasKey=function(D){return !!this._idx[D];};C.prototype.makeFinal=function(){return this._valBuf;};}if(B instanceof Array){A=new this.FormDataDecoratorArray(B);}else{if(this.isString(B)){A=new this.FormDataDecoratorString(B);}else{A=new this.FormDataDecoratorOther(B);}}return A;},attr:function(H,C,G){var A=function(I,J){return(I["_"+J])?"_"+J:((I[J])?J:null);};var B=function(I,L,K,J){if(K){if(J){I[L](K);}else{I[L]=K;}return null;}return(J)?I[L]():I[L];};try{var D=A(H,C);if(D){return B(H,D,G);}var F=false;var E=(G)?"set":"get";D=[E,C.substr(0,1).toUpperCase(),C.substr(1)].join("");D=A(H,D);if(D){return B(H,D,G,true);}throw this.makeException(new Error(),null,null,this._nameSpace,"contains","property "+C+" not found");}finally{A=null;B=null;}},makeException:function(C,F,B,D,A,E){C.name=B||"clientError";C.title=F||"";C.message=E||"";C._mfInternal={};C._mfInternal.name=B||"clientError";C._mfInternal.title=F||"clientError";C._mfInternal.caller=D||this._nameSpace;C._mfInternal.callFunc=A||(""+arguments.caller.toString());return C;}});